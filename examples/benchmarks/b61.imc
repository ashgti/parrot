.sub main @MAIN
    .local pmc L
    L = new IntList
    L[0] = 1
    L *= 1000000
    L[-1] = 42

    .local pmc n
    n = new PerlInt
    n = 0

    .local pmc iter_1
    .local int i
    iter_1 = new Iterator, L
.include "iterator.pasm"
    iter_1 = .ITERATE_FROM_START
iter_1_lp:
    unless iter_1, iter_1_end
    i = shift iter_1
    n += i
    goto iter_1_lp
iter_1_end:
    print n
    print "\n"
.end
