#
# Makefile.in
#
# $Id$
#

DIR=languages/jako
TOOL_DIR=../..
ASM=perl -I ../../ ../../assemble.pl
JAKOC=./jakoc
INTERP=../../parrot

.SUFFIXES: .jako .pasm .pbc

.jako.pasm:
	$(JAKOC) $< > $@

.pasm.pbc:
	$(ASM) $< > $@


#
# Default target:
#

all: bench.pbc euclid.pbc fact.pbc fib.pbc hello.pbc leibniz.pbc \
mandelbrot.pbc mandelzoom.pbc mops.pbc primes.pbc queens.pbc sub.pbc


#
# Compilation:
#

bench.pasm: bench.jako jakoc
euclid.pasm: euclid.jako jakoc
fact.pasm: fact.jako jakoc
fib.pasm: fib.jako jakoc
hello.pasm: hello.jako jakoc
leibniz.pasm: leibniz.jako jakoc
mandelbrot.pasm: mandelbrot.jako jakoc
mandelzoom.pasm: mandelzoom.jako jakoc
mops.pasm: mops.jako jakoc
primes.pasm: primes.jako jakoc
queens.pasm: queens.jako jakoc
sub.pasm: sub.jako jakoc


#
# Assembly:
#

bench.pbc: bench.pasm
euclid.pbc: euclid.pasm
fact.pbc: fact.pasm
fib.pbc: fib.pasm
hello.pbc: hello.pasm
leibniz.pbc: leibniz.pasm
mandelbrot.pbc: mandelbrot.pasm
mandelzoom.pbc: mandelzoom.pasm
mops.pbc: mops.pasm
primes.pbc: primes.pasm
queens.pbc: queens.pasm
sub.pbc: sub.pasm


#
# Other targets:
#

clean:
	rm -f *.pasm *.list *.pbc

over:
	@$(MAKE) clean
	@$(MAKE) all

test: all
	$(INTERP) bench.pbc
	$(INTERP) euclid.pbc
	$(INTERP) fact.pbc
	$(INTERP) fib.pbc
	$(INTERP) hello.pbc
	$(INTERP) leibniz.pbc
	$(INTERP) mandelbrot.pbc
	$(INTERP) mandelzoom.pbc
	$(INTERP) mops.pbc
	$(INTERP) primes.pbc
	$(INTERP) queens.pbc
	$(INTERP) sub.pbc


#
# End of file.
#
