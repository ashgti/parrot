###
# [eval]

#
# eval arg [... arg arg]

.sub __cmd_eval
  .param PerlArray argv
  
  .local string expr
  .local int argc
  .local int looper

  expr = ""
  looper = 0
  argc = argv

loop:
  if looper == argc goto loop_done
  $S0 = argv[looper]
  concat expr, $S0
  inc looper
  if looper == argc goto loop_done
  concat expr," "

  goto loop

loop_done:
 
  # should handle errors here, neh? 
  $P1 = __parse(expr)   
  ($I0,$S0) = __interpret($P1) 

done:
  .pcc_begin_return
  .return $I0
  .return $S0
  .pcc_end_return
.end
