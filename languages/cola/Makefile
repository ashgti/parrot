# Manually generated by programmer 

# Visual C++
#CC = cl
DEBUG = -g
# GCC
CC = gcc -Wall
YACC = bison -v -y
LEX = flex
LIBS =
#LIBS = -ll -ly
#LIBS = -lfl

HEADERS = cola.h parser.h

default :
	$(MAKE) x
	cp x colac

nogen : sym.o type.o gen.o
	$(CC) $(DEBUG) -c parser.c
	$(CC) $(DEBUG) -c lexer.c
	$(CC) $(DEBUG) -o x parser.o lexer.o sym.o type.o gen.o $(LIBS)

clean :
	rm -f core
	rm -f *.o *.imc
	rm -f parser.h parser.output
	rm -f lexer.c parser.c
	rm -f x

publish :
	perl publish.pl < MANIFEST

parser.c : cola.y
	$(YACC) -d -o parser.c cola.y

lexer.c : cola.l $(HEADERS) 
	$(LEX) cola.l

lexer.o : lexer.c $(HEADERS) 
	$(CC) $(DEBUG) -c lexer.c

parser.o : parser.c $(HEADERS)
	$(CC) $(DEBUG) -c parser.c

sym.o : sym.c $(HEADERS)
	$(CC) $(DEBUG) -c sym.c

type.o : type.c $(HEADERS)
	$(CC) $(DEBUG) -c type.c

gen.o : gen.c $(HEADERS)
	$(CC) $(DEBUG) -c gen.c

x : parser.o lexer.o sym.o type.o gen.o
	$(CC) $(DEBUG) -o x parser.o lexer.o sym.o type.o gen.o $(LIBS)

