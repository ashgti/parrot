# Copyright (C) 2006-2007, The Perl Foundation.
# $Id$

=head1 NAME

fetchspec - retrieve selected tests from Pugs test repo

=head1 SYNOPSIS

This script uses svn to retrieve selected tests from the
Perl 6 test repository (currently at http://svn.pugscode.org/t).

This script expects to be called from the languages/perl6/
directory.

=cut

use strict;
use File::Path;
use File::Basename qw(dirname);

my @spectests = qw(
    t/01-sanity
    t/spec/S02-literals
    t/spec/S03-operators
    t/spec/S04-statements
    t/spec/S29-str
);

svn_export('t/spec', @spectests);

exit(0);


sub svn_export {
    my $tgtdir = shift;
    my $spec_repo = 'http://svn.pugscode.org/pugs';

    foreach my $srcfile (@_) {
        my $tgtfile = $srcfile;
        $tgtfile =~ s!^t/(spec/)?!!;

        my $dirname = dirname($tgtfile);
        mkpath "$tgtdir/$dirname";
        my $cmd = "svn export --force $spec_repo/$srcfile $tgtdir/$tgtfile";
        print "$cmd\n";
        system($cmd);
    }
}


# Local Variables:
#   mode: cperl
#   cperl-indent-level: 4
#   fill-column: 100
# End:
# vim: expandtab shiftwidth=4:


