# Copyright (C) 2005-2007, The Perl Foundation.
# $Id$

# Makefile for languages/regex

# Setup of some commands
PARROT = ..@slash@..@slash@parrot@exe@
PERL = @perl@
RM_F = @rm_f@
YAPP = yapp

all : lib/Regex/Grammar.pm regex-compiler.pbc

lib/Regex/Grammar.pm : lib/Regex/Grammar.y
	$(YAPP) -s -m Regex::Grammar -o $@ lib/Regex/Grammar.y

regex-compiler.pbc : regex-compiler.pir
	$(PARROT) -o regex-compiler.pbc regex-compiler.pir

# Note: These tend to be in the order of the latest thing I've been
# working on to the oldest, so that I see the failures quicker.
.PHONY: test
test :
	$(PERL) t/harness

# This is a TODO test -- currently, it loops forever. It will require
# adding a check to the matcher that it is making progress. Or
# something. I need to look at this again.
#
#	$(PERL) test.pl t/basic/infinite.t

CLEANERS = \
    "*.pbc" \
    test.pir

clean:
	$(RM_F) $(CLEANERS)

distclean: clean
	$(RM_F) Makefile

