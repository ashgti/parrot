# $Id$

# Setup some commands
PERL    = @perl@
PARROT   = ../../parrot@exe@

# default
all:

# This is a listing of all targets, that are meant to be called by users
help:
	@echo ""
	@echo "Following targets are available for the user:"
	@echo ""
	@echo "Building:"
	@echo "  all:               Build plumhead.pbc."
	@echo "                     This is the default."
	@echo ""
	@echo "Testing:"
	@echo "  test:              Run the test suite."
	@echo "  test-php:          Run the test suite."
	@echo "  test-phc-to-past:  Run the test suite."
	@echo ""
	@echo "Cleaning:"
	@echo "  clean:             makes clean-test."
	@echo "  distclean:         makes clean-test."
	@echo "  clean-test:        Clean up temporary files from testing."
	@echo ""
	@echo "Misc:"
	@echo "  help:              Print this help message."
	@echo ""

all: plumhead.pbc

# the default target
plumhead.pbc: $(PARROT) plumhead.pir
	$(PARROT) -o plumhead.pbc plumhead.pir

test: all test-php test-phc-to-past

test-php:
	cd .. && $(PERL) -I../lib -I plumhead/lib plumhead/t/harness --with-php

test-phc-to-past:
	cd .. && $(PERL) -I../lib -I plumhead/lib plumhead/t/harness --with-phc-to-past

# Nothing needs to be built
build:

clean: clean-test

# Leave the generated test files in place
clean-test:
