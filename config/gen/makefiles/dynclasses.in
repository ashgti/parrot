PERL = ${perl}
RM_F = ${rm_f}
LOAD_EXT = ${load_ext}
DESTDIR = ${build_dir}${slash}runtime${slash}parrot${slash}dynext
O = ${o}

# add your dynamic pmcs here

PMCS = foo subproxy \
tclobject tclstring tclint tclfloat \
tcllist tclarray \
match matchrange \
pybuiltin \
pyclass \
pyobject \
  pyboolean \
  pycomplex \
  pydict \
  pyexception \
  pyfloat \
  pyfunc \
  pygen \
  pyint \
  pylist \
  pylong \
  pymodule \
  pynone \
  pytype \
  pystring \
  pytuple \
pyproxytype \
pyproxyclass

BUILD = ${perl} build.pl

all :
	@$(BUILD) generate $(PMCS)
	@$(BUILD) compile $(PMCS)
	@$(BUILD) linklibs $(PMCS)
	@$(BUILD) copy --destination=$(DESTDIR) $(PMCS)

test : all
	cd .. ; perl -Ilib t/harness t/dynclass/*.t

testclean :
	$(RM_F) ../t/dynclass/*.imc

clean : testclean
	$(RM_F) *.c *.h *$(LOAD_EXT) *.dump lib-* *$(O)

realclean: clean
	$(RM_F) Makefile build.pl

distclean: realclean

cvsclean: realclean
