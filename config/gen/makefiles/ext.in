# $Id$

# setup of commands
@make_set_make@
PERL      = @perl@
MAKE      = @make_c@
RM_F      = @rm_f@

# add new languages here
# remove obsolete languages here
EXT = \
    Parrot-Embed

# the default target
all: $(EXT)

# hard-code these for now
test: Parrot-Embed
	- cd Parrot-Embed && $(PERL) Build test

clean: Parrot-Embed
	- cd Parrot-Embed && $(PERL) Build clean

# This is a listing of all targets, that are meant to be called by users
help:
	@echo ""
	@echo "Following targets are available for the user:"
	@echo ""
	@echo "  all:          Make a lot of language implementations."
	@echo "                This is the default."
	@echo "  test:         Unified test suite for a lot of languages."
	@echo ""
	@echo "  clean:        Clean up a lot of languages."
	@echo ""
	@echo "  help:         Print this help message."
	@echo ""
	@echo "  smoke:        Run the test suite and send smoke.html to "
	@echo "                http://smoke.parrotcode.org/"
	@echo ""
	@echo "  smoke-clean:  clean up smoke.html"
	@echo ""
	@echo ""
	@echo "Following languages are available:"
	@echo "  $(LANGUAGES)"
	@echo "A particular language <lang> can be built, tested and cleand up"
	@echo "  make <lang>"
	@echo "  make <lang>.test"
	@echo "  make <lang>.clean"
	@echo "For the status of individual languages see LANGUAGES.STATUS.pod"
	@echo ""

clean: \
    Parrot-Embed.clean

#
# Extension specific targets
#

# The *.dummy targets are a replacement for the target .PHONY in 'GNU make'

Parrot-Embed : Parrot-Embed.dummy

Parrot-Embed.dummy:
	- cd Parrot-Embed && $(PERL) Build.PL && $(PERL) Build
