/*
 * test_gnuc.c - figure out if the compiler is gcc.
 */

#include <stdio.h>

#include "parrot/compiler.h"

__attribute__malloc__
__attribute__noreturn__
__attribute__warn_unused_result__
__attribute__deprecated__
int dummyfunc(int x, int y, int z)
    __attribute__format__(1,2,3)
    __attribute__nonnull__(1)
    ;

__attribute__const__
int constfunc(int x);

__attribute__pure__
int purefunc(int x);

int useless(void) { int x __attribute__unused__; }

int
main(int argc, char **argv)
{
    puts("(");
#if defined(__GNUC__) && ! defined(__INTEL_COMPILER)
    printf("__GNUC__ => %d,\n", __GNUC__);
#  ifdef __GNUC_MINOR__
    printf("__GNUC_MINOR__ =>%d,\n", __GNUC_MINOR__);
#  endif
#else
    puts("__GNUC__ => undef,");
#endif
    puts(");");
    return 0;
}

/*
 * Local variables:
 * c-indentation-style: bsd
 * c-basic-offset: 4
 * indent-tabs-mode: nil
 * End:
 *
 * vim: expandtab shiftwidth=4:
 */
