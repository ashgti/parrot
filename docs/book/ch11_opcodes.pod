=pod

=head1 Opcodes and Runcores

Z<CHP-11>

The smallest executable component is not the compilation unit or even the subroutine,
but is in fact the opcode. Opcodes in PASM, like opcodes in other assembly languages,
are individual instructions that implement low-level operations in Parrot N<In the
world of microprocessors, the word "opcode" typically refers to the numeric identifier
for each instructions. The human-readable word used in the associated assembly language
is called the "mnemonic". An assembler, among other tasks, is responsble for converting
mnemonics into opcodes for execution. In Parrot, instead of referring to an instruction
by different names depending on what form it's in, we just call them all "opcodes">. Of
course the list of things that qualify as "low-level" in Parrot can be pretty advanced
compared to the functionality supplied by regular assembly language opcodes.

Before we talk about opcodes, we have to a little bit of talking about the various
runcores that invoke them.

=head2 Runcores

During execution, the runcore is like the heart of Parrot. The runcore controls calling
the various opcodes with the correct data, and making sure that program flow moves
properly. Some runcores, such as the I<precomputed C goto runcore> are optimized for
speed and don't perform many tasks beyond finding and dispatching opcodes. Other runcores,
such as the I<GC-Debug>, I<debug> and I<profiling> runcores help with typical software
maintenance and analysis tasks. Different runcores, because of the way they are structured,
require the opcodes to be compiled into different forms. Because of this, understanding
opcodes first requires an understanding of the Parrot runcores.

=head3 Types of Runcores

Parrot has multiple runcores. Some are useful for particular maintenance tasks, some are
only available as optimizations in certain compilers, some are intended for general use,
and some are just interesing flights of fancy with no practical benefits.

=over 4

=item*

=item*

=item*

=back

=head2 Writing Opcodes

Writing Opcodes, like writing PMCs, is done in a C-like language which is later
compiled into C code by the X<opcode compiler> opcode compiler. The opcode script
represents a thin overlay on top of ordinary C code: All valid C code is valid
Opcode script. There are a few neat additions that make writing Opcodes easier.

=head3 Opcode Parameters

=head3 Opcode Control Flow

=head2 The Opcode Compiler 

=head2 Opcode Multiple Dispatch

##########################################################################
#                              PSEUDOPOD LEGEND
#
#  Interior Sequences
#  ..................
#  A<>         link anchor (source)
#  B<>         bold text
#  C<>         monospace text
#  E<>         named character
#  F<>         file name
#  G<>         superscript
#  H<>         subscript
#  I<>         italicized text
#  L<>         link to other manpage (see A<>)
#  M<>         firstterm
#  N<>         footnote
#  Q<>         quoted text
#  R<>         replaceable item
#  S<>         text with non-breaking spaces
#  T<>         cited title for book, etc.
#  U<>         URL
#  X<>         a single index term of the form:
#                    primary:sortas;secondary:sortas;tertiary:sortas;;ETC
#                    where ETC is either (see term) or (see also term)
#                    only primary term is required
#  Z<>         link anchor (destination)
#
#  Heads
#  .....
#  head0                    chapter title
#  head{1-4}                section title (4 levels)
#
#  Command Paragraphs (begin/end Blocks)
#  .....................................
#  blockquote               quotation
#  comment                  ignored text
#  caution                  admonition
#  epigraph                 quotation
#  example                  container
#  figure CAPTION           figure
#  important                admonition
#  note                     admonition
#  programlisting           literal text
#  screen                   literal text
#  sidebar                  container
#  table html [CAPTION]     table rendered in HTML
#  table picture [CAPTION]  table rendered in plain text
#  tip                      admonition
#  warning                  admonition
#
#
#  Command Paragraphs (for Blocks)
#  ...............................
#  This structure will be used only for comments. For example:
#
#    =for editor
#    Check my spelling on this.
#    =end
#
#  This will be rendered as a visible comment in the final output
#  with a label at the top addressing it to "editor". The exception is
#  =for ignore which will always be ignored by the parser.
#
#  Tables
#  ......
#  A 2x2 table with top header row looks like this:
#  
#  =begin table An Example Table
#  =headrow
#  =row
#  =cell Header for first column (row 1, col 1)
#  =cell Header for 2nd column (row 1, col 2)
#  =bodyrows
#  =cell Cell for row 2, col 1
#  =cell Cell for row 2, col 2
#  =end table
#
#  For more information on PSEUDOPOD, write to tools@oreilly.com
##########################################################################

# Local variables:
#   c-file-style: "parrot"
# End:
# vim: expandtab shiftwidth=4:
