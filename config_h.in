/* config.h
 *
 * Platform-specific config file
 *
 */

#if !defined(PARROT_CONFIG_H_GUARD)
#define PARROT_CONFIG_H_GUARD

#if defined(PARROT_IN_CORE)

#include <stddef.h>

typedef ${iv} INTVAL;
typedef unsigned ${iv} UINTVAL;
typedef ${nv} FLOATVAL;

typedef ${opcode_t} opcode_t;
typedef size_t ptrcast_t;

typedef struct _vtable VTABLE;
typedef void DPOINTER;
typedef void SYNC;

/* typedef INTVAL *(*opcode_funcs)(void *, void *) OPFUNC; */

#define FRAMES_PER_CHUNK 16

/* Default amount of memory to allocate in one whack */
#define DEFAULT_SIZE 32768

#define FRAMES_PER_PMC_REG_CHUNK FRAMES_PER_CHUNK
#define FRAMES_PER_NUM_REG_CHUNK FRAMES_PER_CHUNK
#define FRAMES_PER_INT_REG_CHUNK FRAMES_PER_CHUNK
#define FRAMES_PER_STR_REG_CHUNK FRAMES_PER_CHUNK

#define MASK_STACK_CHUNK_LOW_BITS ${stacklow}
#define MASK_INT_CHUNK_LOW_BITS ${intlow}
#define MASK_NUM_CHUNK_LOW_BITS ${numlow}
#define MASK_STR_CHUNK_LOW_BITS ${strlow}
#define MASK_PMC_CHUNK_LOW_BITS ${pmclow}

#define JIT_CPUARCH  "${jitcpuarch}"
#define JIT_OSNAME   "${jitosname}"
#define JIT_ARCHNAME "${jitarchname}"
#define JIT_CAPABLE  ${jitcapable}

#define PARROT_CORE_OPLIB_NAME "core"
#define PARROT_CORE_OPLIB_INIT Parrot_DynOp_core_${MAJOR}_${MINOR}_${PATCH}

#define INTVAL_FMT "${intvalfmt}"
#define FLOATVAL_FMT "${floatvalfmt}"

${headers}

#endif

#define PARROT_VERSION         "${VERSION}"
#define PARROT_CONFIG_DATE	   "${configdate}"
#define PARROT_MAJOR_VERSION   ${MAJOR}
#define PARROT_MINOR_VERSION   ${MINOR}
#define PARROT_PATCH_VERSION   ${PATCH}
#define PARROT_ARCHNAME        "${jitarchname}"
#define PARROT_JIT_CAPABLE     ${jitcapable}

typedef ${iv} Parrot_Int;
typedef unsigned ${iv} Parrot_UInt;
typedef ${nv} Parrot_Float;
typedef ${opcode_t} Parrot_Opcode;
typedef unsigned char Parrot_Bool;
typedef void * Parrot_Pointer;
typedef void * Parrot_Sync;

/* These are temporary until we put them in the proper places. */
struct Parrot_Interp;  typedef struct Parrot_Interp	* Parrot;
struct PackFile;		typedef struct PackFile * Parrot_PackFile;

#endif
