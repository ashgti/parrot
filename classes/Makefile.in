O = ${o}
RM_F = ${rm_f}

INC=../include/parrot

H_FILES = $(INC)/parrot.h default.h

O_FILES = default$(O) perlint$(O) perlstring$(O) perlnum$(O) perlarray$(O) perlundef$(O)

#DO NOT ADD C COMPILER FLAGS HERE
#Add them in Configure.pl--look for the
#comment 'ADD C COMPILER FLAGS HERE'
CFLAGS = ${ccflags} ${cc_debug} -I../include

C_LIBS = ${libs}

CC = ${cc}
PERL = ${perl}
MAKE_F=${make}

.c$(O):
	$(CC) $(CFLAGS) ${ld_out}$@ -c $<

all : $(O_FILES)

default.c default.h: default.pmc
	$(PERL) pmc2c.pl default.pmc

default$(O): $(H_FILES)

perlint.c perlint.h: perlint.pmc 
	$(PERL) pmc2c.pl perlint.pmc

perlint$(O): $(H_FILES)

perlnum.c perlnum.h: perlnum.pmc 
	$(PERL) pmc2c.pl perlnum.pmc

perlnum$(O): $(H_FILES)

perlstring.c perlstring.h: perlstring.pmc 
	$(PERL) pmc2c.pl perlstring.pmc

perlstring$(O): $(H_FILES)

perlarray.c perlarray.h: perlarray.pmc 
	$(PERL) pmc2c.pl perlarray.pmc

perlarray$(O): $(H_FILES)

perlundef.c perlundef.h: perlundef.pmc 
	$(PERL) pmc2c.pl perlundef.pmc

perlundef$(O): $(H_FILES)

clean:
	$(RM_F) *.c *$(O) default.h

update:
	cvs -q update -dP

